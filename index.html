<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‚Äî ‡§≤‡§ø‡§Ç‡§ó & ‡§µ‡§ö‡§®</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;700&display=swap" rel="stylesheet">
<style>
body{font-family:'Noto Sans Devanagari',sans-serif;background:#fff9f0;margin:0;padding:20px;color:#111}
h1{color:#b71c1c;text-align:center;margin:6px 0 18px;font-size:2rem}
.center{max-width:760px;margin:0 auto;padding:12px}
.controls{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin:12px 0}
button{border:none;padding:12px 16px;border-radius:8px;font-size:1rem;cursor:pointer;transition:all 0.2s}
button.blue{background:#1565c0;color:#fff;box-shadow:0 2px 4px rgba(0,0,0,0.1)}
button.gray{background:#6c757d;color:#fff}
button:disabled{opacity:0.5;cursor:not-allowed}
input[type=text]{width:100%;padding:16px;border-radius:8px;border:2px solid #ddd;font-size:1.2rem;box-sizing:border-box;margin:12px 0}
#question{font-size:2rem;margin:24px 0 12px;text-align:center;background:#e3f2fd;padding:20px;border-radius:12px}
#translation{font-size:1.1rem;color:#666;text-align:center;margin-bottom:16px}
#feedback{min-height:40px;margin:16px 0;font-size:1.2rem;font-weight:700;text-align:center}
#feedback.correct{color:#0b5;background:#e8f5e8;padding:12px;border-radius:8px}
#feedback.wrong{color:#c00;background:#ffebee;padding:12px;border-radius:8px}
.note{color:#b71c1c;margin-top:24px;font-weight:700;text-align:center}
.small{font-size:0.9rem;color:#666;margin-top:16px;text-align:center}
#loginModal{position:fixed;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:999}
.loginBox{background:#fff;padding:30px;border-radius:16px;max-width:400px;width:90%;text-align:center;box-shadow:0 10px 30px rgba(0,0,0,0.3)}
.loginBox input{font-size:1.2rem;padding:16px;margin:12px 0}
#logoutBtn{background:#b71c1c;color:#fff;margin-top:16px;padding:12px 20px;border-radius:8px;border:none;cursor:pointer;font-size:1rem}
.progress-bar{background:#e0e0e0;height:8px;border-radius:4px;margin:12px 0;overflow:hidden}
.progress-fill{background:#4caf50;height:100%;transition:width 0.3s;border-radius:4px}
</style>
</head>
<body>
<div class="center">
<h1>‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‚Äî ‡§≤‡§ø‡§Ç‡§ó & ‡§µ‡§ö‡§®</h1>

<!-- LOGIN MODAL -->
<div id="loginModal">
  <div class="loginBox">
    <h2>‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç</h2>
    <input id="loginName" type="text" placeholder="‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ‡•á‡§Ç" />
    <button id="loginBtn" class="blue">‡§™‡•ç‡§∞‡§µ‡•á‡§∂ ‡§ï‡§∞‡•á‡§Ç</button>
    <p id="loginMsg" style="color:#c00;margin-top:16px"></p>
    <p style="font-size:0.95rem;color:#666;margin-top:16px">‡§è‡§ï ‡§¨‡§æ‡§∞ ‡§™‡•Ç‡§∞‡§æ ‡§ï‡§∞‡§®‡•á ‡§™‡§∞ ‡§µ‡§π‡•Ä ‡§®‡§æ‡§Æ ‡§â‡§∏‡•Ä ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§∏‡•á ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§®‡§π‡•Ä‡§Ç ‡§¶‡•á ‡§™‡§æ‡§è‡§ó‡§æ‡•§</p>
  </div>
</div>

<!-- QUIZ AREA -->
<div id="quizArea" style="display:none">
  <div class="progress-bar"><div id="progressFill" class="progress-fill" style="width:0%"></div></div>
  <div id="question">‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è "‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç" ‡§¶‡§¨‡§æ‡§è‡§Å</div>
  <div id="translation"></div>
  <input id="answerInput" type="text" placeholder="‡§Ø‡§π‡§æ‡§Å ‡§â‡§§‡•ç‡§§‡§∞ ‡§≤‡§ø‡§ñ‡•á‡§Ç (Enter ‡§¶‡§¨‡§æ‡§è‡§Å)" disabled/>
  <div class="controls">
    <button id="startBtn" class="blue">‚ñ∂Ô∏è ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç</button>
    <button id="resetBtn" class="gray">üîÅ ‡§∞‡•Ä‡§∏‡•á‡§ü</button>
    <button id="showAnswerBtn" class="gray">üí° ‡§â‡§§‡•ç‡§§‡§∞ ‡§¶‡•á‡§ñ‡•á‡§Ç</button>
    <button id="passBtn" class="gray">‚è≠ ‡§™‡§æ‡§∏</button>
    <button id="checkBtn" class="blue">‚úÖ ‡§ú‡§æ‡§Å‡§ö‡•á‡§Ç</button>
  </div>
  <div id="feedback"></div>
  <div id="score" class="small"></div>
  <button id="logoutBtn">üîí ‡§≤‡•â‡§ó‡§Ü‡§â‡§ü ‡§î‡§∞ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§≠‡•á‡§ú‡•á‡§Ç</button>
  <p class="small">‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§Ü‡§ß‡•Å‡§®‡§ø‡§ï ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§Æ‡•á‡§Ç ‡§¨‡§ø‡§®‡§æ ‡§ï‡§ø‡§∏‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§ï‡•á ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à</p>
</div>
</div>

<script>
const WHATSAPP_PHONE = "919994895676";

const vachanQuestions = [
  { word: "‡§¨‡§æ‡§≤‡§ï", answers:["‡§¨‡§æ‡§≤‡§ï"] },
  { word: "‡§ï‡§≤‡§Æ", answers:["‡§ï‡§≤‡§Æ","‡§ï‡§≤‡§Æ‡•á‡§Ç"] },
  { word: "‡§ï‡•Å‡§§‡•ç‡§§‡§æ", answers:["‡§ï‡•Å‡§§‡•ç‡§§‡•á"] },
  { word: "‡§ò‡•ã‡§°‡§º‡§æ", answers:["‡§ò‡•ã‡§°‡§º‡•á"] },
  { word: "‡§¶‡•ã‡§∏‡•ç‡§§", answers:["‡§¶‡•ã‡§∏‡•ç‡§§"] },
  { word: "‡§ö‡§ø‡§°‡§º‡§ø‡§Ø‡§æ", answers:["‡§ö‡§ø‡§°‡§º‡§ø‡§Ø‡§æ‡§Å","‡§ö‡§ø‡§°‡§º‡§ø‡§Ø‡§æ‡§Ç"] },
  { word: "‡§¶‡•á‡§µ‡§§‡§æ", answers:["‡§¶‡•á‡§µ‡§§‡§æ"] },
  { word: "‡§≤‡§°‡§º‡§ï‡•Ä", answers:["‡§≤‡§°‡§º‡§ï‡§ø‡§Ø‡§æ‡§Å","‡§≤‡§°‡§º‡§ï‡§ø‡§Ø‡§æ‡§Ç"] },
  { word: "‡§®‡§¶‡•Ä", answers:["‡§®‡§¶‡§ø‡§Ø‡§æ‡§Å","‡§®‡§¶‡§ø‡§Ø‡§æ‡§Ç"] },
  { word: "‡§´‡§≤", answers:["‡§´‡§≤"] },
  { word: "‡§∏‡§°‡§º‡§ï", answers:["‡§∏‡§°‡§º‡§ï‡•á‡§Ç","‡§∏‡§°‡§º‡§ï‡•á"] },
  { word: "‡§ó‡§æ‡§°‡§º‡•Ä", answers:["‡§ó‡§æ‡§°‡§º‡§ø‡§Ø‡§æ‡§Å","‡§ó‡§æ‡§°‡§º‡§ø‡§Ø‡§æ‡§Ç"] },
  { word: "‡§ï‡§ø‡§§‡§æ‡§¨", answers:["‡§ï‡§ø‡§§‡§æ‡§¨‡•á‡§Ç"] }
];

const lingQuestions = [
  { word:"‡§∏‡§æ‡§π‡§¨", male:["‡§∏‡§æ‡§π‡§¨"], female:["‡§∏‡§æ‡§π‡§ø‡§¨‡§æ"] },
  { word:"‡§∂‡•á‡§∞", male:["‡§∂‡•á‡§∞"], female:["‡§∂‡•á‡§∞‡§®‡•Ä"] },
  { word:"‡§ï‡•Å‡§§‡•ç‡§§‡§æ", male:["‡§ï‡•Å‡§§‡•ç‡§§‡§æ"], female:["‡§ï‡•Å‡§§‡§ø‡§Ø‡§æ"] },
  { word:"‡§Ö‡§≠‡§ø‡§®‡•á‡§§‡§æ", male:["‡§Ö‡§≠‡§ø‡§®‡•á‡§§‡§æ"], female:["‡§Ö‡§≠‡§ø‡§®‡•á‡§§‡•ç‡§∞‡•Ä"] },
  { word:"‡§ò‡•ã‡§°‡§º‡§æ", male:["‡§ò‡•ã‡§°‡§º‡§æ"], female:["‡§ò‡•ã‡§°‡§º‡•Ä"] },
  { word:"‡§¨‡•à‡§≤", male:["‡§¨‡•à‡§≤"], female:["‡§ó‡§æ‡§Ø"] },
  { word:"‡§†‡§æ‡§ï‡•Å‡§∞", male:["‡§†‡§æ‡§ï‡•Å‡§∞"], female:["‡§†‡§ï‡•Å‡§∞‡§æ‡§á‡§®"] },
  { word:"‡§Ø‡•Å‡§µ‡§ï", male:["‡§Ø‡•Å‡§µ‡§ï"], female:["‡§Ø‡•Å‡§µ‡§§‡•Ä"] },
  { word:"‡§Ö‡§ß‡•ç‡§Ø‡§æ‡§™‡§ï", male:["‡§Ö‡§ß‡•ç‡§Ø‡§æ‡§™‡§ï"], female:["‡§Ö‡§ß‡•ç‡§Ø‡§æ‡§™‡§ø‡§ï‡§æ"] },
  { word:"‡§∏‡•á‡§†", male:["‡§∏‡•á‡§†"], female:["‡§∏‡•á‡§†‡§æ‡§®‡•Ä"] },
  { word:"‡§¨‡§ï‡§∞‡§æ", male:["‡§¨‡§ï‡§∞‡§æ"], female:["‡§¨‡§ï‡§∞‡•Ä"] }
];

let pool = [...vachanQuestions.map(q=>({...q,type:'vachan'})), ...lingQuestions.map(q=>({...q,type:'ling'}))];
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}}

let idx=0,score=0,started=false;
const elements={loginModal:document.getElementById('loginModal'),loginName:document.getElementById('loginName'),loginBtn:document.getElementById('loginBtn'),loginMsg:document.getElementById('loginMsg'),quizArea:document.getElementById('quizArea'),question:document.getElementById('question'),translation:document.getElementById('translation'),answerInput:document.getElementById('answerInput'),startBtn:document.getElementById('startBtn'),resetBtn:document.getElementById('resetBtn'),showAnswerBtn:document.getElementById('showAnswerBtn'),passBtn:document.getElementById('passBtn'),checkBtn:document.getElementById('checkBtn'),feedback:document.getElementById('feedback'),score:document.getElementById('score'),logoutBtn:document.getElementById('logoutBtn'),progressFill:document.getElementById('progressFill')};

function normalize(s){return s?s.toString().normalize('NFD').replace(/[\u093C-\u094D\u0964-\u0965\s\p{P}]/gu,'').toLowerCase():'';}
function matchAnswer(inp,expected){return expected.some(e=>normalize(inp)===normalize(e));}

function showQuestion(){
  if(idx>=pool.length){endQuiz();return;}
  const q=pool[idx],progress=(idx/pool.length)*100;
  elements.progressFill.style.width=progress+'%';
  
  if(q.type==='vachan'){
    elements.question.textContent=`‡§µ‡§ö‡§®: ${q.word} ‚Üí ‡§¨‡§π‡•Å‡§µ‡§ö‡§®?`;
    elements.translation.textContent='(Plural form)';
    q._expected=q.answers;
  }else{
    const isMale=Math.random()<0.5;
    elements.question.textContent=`‡§≤‡§ø‡§Ç‡§ó: ${q.word} ‚Üí ${isMale?'‡§™‡•Å‡§≤‡•ç‡§≤‡§ø‡§Ç‡§ó':'‡§∏‡•ç‡§§‡•ç‡§∞‡•Ä‡§≤‡§ø‡§Ç‡§ó'}?`;
    elements.translation.textContent=`(${isMale?'Masculine':'Feminine'})`;
    q._expected=isMale?q.male:q.female;
  }
  
  elements.answerInput.value='';elements.feedback.textContent='';elements.answerInput.disabled=false;
  elements.passBtn.disabled=false;elements.checkBtn.disabled=false;elements.showAnswerBtn.disabled=false;
}

function checkAnswer(userTxt){
  if(matchAnswer(userTxt,pool[idx]._expected)){
    score++;elements.feedback.textContent='‚úÖ ‡§∏‡§π‡•Ä ‡§â‡§§‡•ç‡§§‡§∞!';elements.feedback.className='correct';
  }else{
    elements.feedback.textContent=`‚ùå ‡§ó‡§≤‡§§! ‡§∏‡§π‡•Ä: ${pool[idx]._expected[0]}`;elements.feedback.className='wrong';
  }
  elements.answerInput.disabled=true;elements.passBtn.disabled=true;elements.checkBtn.disabled=true;
  setTimeout(()=>idx++,1500);
  setTimeout(showQuestion,1600);
}

elements.startBtn.onclick=()=>{if(!started){started=true;shuffle(pool);idx=0;score=0;showQuestion();elements.score.textContent='';}};
elements.resetBtn.onclick=()=>{started=false;idx=0;score=0;elements.question.textContent='‡§∞‡•Ä‡§∏‡•á‡§ü ‡§π‡•Å‡§Ü‡•§ "‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç" ‡§¶‡§¨‡§æ‡§è‡§Å';};
elements.checkBtn.onclick=()=>{const v=elements.answerInput.value.trim();if(!v){elements.feedback.textContent='‡§â‡§§‡•ç‡§§‡§∞ ‡§≤‡§ø‡§ñ‡•á‡§Ç';return;}checkAnswer(v);};
elements.passBtn.onclick=()=>{idx++;showQuestion();};
elements.showAnswerBtn.onclick=()=>{elements.feedback.textContent=`‡§â‡§§‡•ç‡§§‡§∞: ${pool[idx]._expected[0]}`;elements.feedback.className='correct';};
elements.answerInput.onkeydown=e=>e.key==='Enter'&&elements.checkBtn.click();

function endQuiz(){
  started=false;elements.question.textContent='üéâ ‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§!';elements.feedback.textContent='';
  elements.score.textContent=`‡§∏‡•ç‡§ï‡•ã‡§∞: ${score}/${pool.length} (${Math.round(score/pool.length*100)}%)`;
  elements.answerInput.disabled=true;elements.passBtn.disabled=true;elements.checkBtn.disabled=true;
}

elements.logoutBtn.onclick=()=>{
  const name=localStorage.getItem('quiz_user_name')||elements.loginName.value||'Unknown';
  const waMsg=encodeURIComponent(`‡§®‡§Æ‡§∏‡•ç‡§§‡•á ${name}! ‡§Æ‡•á‡§∞‡§æ ‡§∏‡•ç‡§ï‡•ã‡§∞ ${score}/${pool.length} (${Math.round(score/pool.length*100)}%)`);
  window.open(`https://wa.me/${WHATSAPP_PHONE}?text=${waMsg}`,'_blank');
  localStorage.setItem('quiz_done_for_'+name,JSON.stringify({score,time:new Date().toLocaleString()}));
  localStorage.removeItem('quiz_user_name');
  alert('WhatsApp ‡§ñ‡•Å‡§≤ ‡§ó‡§Ø‡§æ! ‡§∏‡•ç‡§ï‡•ã‡§∞ ‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡•á‡§Ç‡•§');
  location.reload();
};

elements.loginBtn.onclick=()=>{
  const name=elements.loginName.value.trim();
  if(!name){elements.loginMsg.textContent='‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ‡•á‡§Ç';return;}
  if(localStorage.getItem('quiz_done_for_'+name)){elements.loginMsg.textContent='‡§™‡§π‡§≤‡•á ‡§™‡•Ç‡§∞‡§æ ‡§ï‡§∞ ‡§ö‡•Å‡§ï‡•á ‡§π‡•à‡§Ç';return;}
  localStorage.setItem('quiz_user_name',name);
  elements.loginModal.style.display='none';elements.quizArea.style.display='block';
  elements.answerInput.disabled=true;elements.passBtn.disabled=true;elements.checkBtn.disabled=true;
};

window.addEventListener('load',()=>{
  const name=localStorage.getItem('quiz_user_name');
  if(name&&!localStorage.getItem('quiz_done_for_'+name)){
    elements.loginName.value=name;elements.loginModal.style.display='none';elements.quizArea.style.display='block';
    elements.answerInput.disabled=true;elements.passBtn.disabled=true;elements.checkBtn.disabled=true;
  }else{
    elements.loginModal.style.display='flex';
  }
});
</script>
</body>
</html>
